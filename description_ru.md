# PhoneShop: E-commerce Web Application

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Веб-приложение для интернет-магазина с использованием классического стек Java EE без применения фреймворков.
Основной упор был сделан на создание надежной и масштабируемой архитектуры, обеспечение безопасности и
реализацию ключевых бизнес-процессов электронной коммерции.

## Ключевые достижения и реализованный функционал:

* **Архитектура**:
    * Спроектировал и реализовал многоуровневую архитектуру приложения (MVC) с четким разделением на слои:
        * веб-интерфейс (Servlets, JSP),
        * сервисный слой
        * слой доступа к данным (DAO).
* **Потокобезопасность**:
    * Обеспечил thread-safety критических компонентов, управляющих состоянием (DAO, Services),
      с помощью java.util.concurrent.locks.ReadWriteLock.
* **Модуль "Продукты"**:
    * Реализовал In-Memory DAO для хранения данных о продуктах.
    * Разработал сложную логику поиска по каталогу, которая ранжирует результаты
      (сначала полные совпадения, затем частичные),
      и сортировку по различным полям (цена, описание).
    * Добавил функционал отслеживания истории цен на товар.
* **Модуль "Корзина"**:
    * Реализовал полную логику работы с корзиной (добавление, обновление количества, удаление товаров).
    * Корзина пользователя хранится в HttpSession, что обеспечивает ее персистентность в рамках сессии.
    * Реализовал проверку наличия товара на складе (OutOfStockException)
      в режиме реального времени при добавлении в корзину.
* **Модуль "Заказы"**:
    * Разработал процесс оформления заказа (checkout) с валидацией данных пользователя (включая валидацию номера телефона).
    * Реализовал сохранение заказа и генерацию уникального безопасного ID для просмотра деталей заказа.
* **Безопасность**:
    * Реализовал механизм защиты от DoS-атак с помощью
      кастомного сервлет-фильтра (DosFilter),
      который отслеживает и ограничивает количество запросов с одного IP-адреса.
* **Веб-интерфейс (UI)**:
    * Создал динамические веб-страницы с использованием JSP, JSTL и
      кастомных тегов для переиспользования UI-компонентов (например, карточка товара, история цен).
    * Настроил жизненный цикл приложения, маппинги сервлетов и обработку ошибок (404, 500) через web.xml.
* **Тестирование**:
    * Написал полный набор модульных тестов с использованием JUnit 5 и Mockito,
      обеспечив стабильность и надежность кода.
* **Дополнительно**:
    * Реализовал функционал "недавно просмотренные товары", также с хранением данных в сессии пользователя.

## Стек технологий:

**Backend**: Java 17, Java Servlets API, JSP, JSTL\
**Тестирование**: JUnit 5, Mockito\
**Сборка и запуск**: Maven, Jetty\
**Логирование:** SLF4J, Logback\
**Frontend**: HTML, CSS, Custom JSP Tags\
**Принципы и паттерны**: MVC, DAO, Singleton, Thread-Safety, Dependency Injection (через ServletContext).

## Возможно у вас возник вопрос(ы):
**Почему In-Memory DAO, а не база данных?"**\
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;целью проекта было сосредоточиться на бизнес-логике, архитектуре и многопоточности, а не на настройке СУБД.
Но при этом реализованная архитектура  позволяет легко заменить реализацию на, например, JdbcProductDao
без изменения сервисного слоя.

## Как запустить:
1. клонируем репозиторий  `git clone`
2. переходим в папку проекта
3. выполняем команду :
    * `./run.sh` (Linux, MacOS) 
    * `./run.bat` (Windows)
4. переходим по ссылке http://localhost:8080/phoneshop/products
